=============================================================
=        NAMPU视频监控平台中央管理服务器CMS修改记录        =
=============================================================
v2.0.1.11
2014.5.17
    1、增加告警服务器告警类型。

v2.0.1.10
2014.1.2
    1、CMS增加对业务点、巡回、群组编码功能；
    2、CMS/SM解决网络配置缓慢问题；
    3、CMS/SM网络配置增加对子网掩码的正确性检查。

v2.0.1.9
2013.11.26
    1、加密狗增加HNW（告警主机）设备类型；
    2、增加CU端向PU端查询设备默认显示参数协议处理；
    3、心跳每3次访问数据库改为“删除设备，删除区域时访问数据库”；
    4、cms启动时删除mysql-bin冗余文件；
    5、增加一天备份一次数据库脚本；
    6、修复数据库获取连接可能失败及死锁问题；
    7、加密狗未插入时处理更改。

v2.0.1.8
2013.10.29
    1、增加智能分析服务器模块；
    2、增加mss上下线对cu端通告；
    3、增加mds,mss,ivs(智能分析服务器)服务设置；
    4、增加关机，重启命令。

v2.0.1.7
2013.08.23
     1、增加cu修改用户密码功能；
     2、cu查询区域、电子地图和设备根据区域名称和设备名称排序，
     3、修正联动电子地图时，将联动的业务点移动到其它区域时，联动业务点还存在的bug，需删除该联动业务点。

v2.0.1.6
2013.08.12
     1、联动电视墙后群组和巡回可以恢复；
     2、封锁某个制作人（制作人编号为17）制作的设备key；
     3、增加了联动电子地图功能；
     4、给用户授权电视墙和巡回权限；
     5、修正电视墙时，获取中性设备url不正确的bug；
     6、增加操作日志：配置联动电子地图的操作、给用户授权电视墙操作、给用户授权巡回操作
     7、修改用户组时更新内存中用户组的权限和等级；
     8、增加权限位区域设备在线状态查询；
     9、在给用户赋业务点、电视墙、巡回权限时，忽略1452的错误，用户、业务点、电视墙或巡回被删除时配置出错；

v2.0.1.5
2013.07.20
     1、修正某些区域下查询设备信息超时的bug；
     2、增加区域设备在线率统计；

v2.0.1.5
2013.07.08
     1、增加查询群组的屏幕的分屏模式,硬解码器每步的分屏模式要一致，不能修改；
     2、增加将设备从一个区域移动到另外一个区域；

v2.0.1.4
2013.06.28
     1、增加用户对电视墙和巡回的权限限制的配置；

v2.0.1.3
2013.06.05
     1、增加联动录像、预置位、IO、上墙；
     2、增加设备子类型，区分软解码器和硬解码器；
     3、增加服务器日志；

v2.0.1.2
2013.04.24
     1、修改了添加和修改机构；
     2、联动录像增加level字段；
     3、cu获取某业务点的url时，检查该业务点是否授权给该用户了；
     4、通知设备下线时增加下线时间；
     5、cu查询区域设备以及区域信息；

v2.0.1.1
2013.04.07
     1、增加查询业务点录像状态；
     2、增加根据区域id删除设备，即删除该区域下所有设备；
     3、增加根据存储服务器ID修改所有业务点的录像策略；
     4、根据存储服务器修改录像策略时，通知存储服务器所有业务点策略改变；
     5、删除业务点时通知cu，如果该点在播放视频则停止其视频播放；
     6、修改和删除联动时间策略时，通知ams模块。
     8、将之前读取配置文件里的音视频限制数去掉，从加密狗里获取；
     9、增加bss和cu查询电视墙授权信息；
    10、修改删除设备代码，可以批量删除设备；
    11、将备份和导入数据库改为异步；
    12、增加根据转发服务器查询设备；
    13、增加根据存储服务器查询业务点；
    14、告警数超过限制数时，告警id继续增加；

v2.0.1.0
2013.03.26
     1、增加ipsan的管理；
     2、增加搜索设备，并自动添加设备；
     3、查询mss信息里增加最后一次使用的mss ip地址；
     4、增加清除某个地图的所有业务点；
     5、修改查询录像策略，先查出录像策略，再连接查询每条记录的详细信息；
     6、将mds心跳投递到数据库模块处理；
     7、增加对模块集合的控制，加密狗里不支持的模块禁止使用；
     8、增加对支持厂商的控制，对加密狗不允许的厂商禁止该厂商的设备的添加和注册；
     9、增加对mss通告消息的处理；
    10、修改数据库备份和导入代码，在导入时禁用触发器，导入完成后启动触发器。

v2.0.0.21
2013.03.2


v2.0.0.20
2013.01.22
     1、修正电视墙获取url错误的bug；
     2、修正电视墙播放的编码器的码流不正确的bug；
     3、向解码器发送TwPlay消息里增加编码器所用的解码控件名；
     4、修改自动添加转发服务ip功能。

v2.0.0.19
2013.01.17
     1、增加群组配置；
     2、增加自动添加转发服务ip功能；
     3、增加预置点、巡航配置；
     4、增加告警联动时间策略配置（bss未发）；
     5、增加告警联动录像配置（bss未发）；

v2.0.0.18
2012.12.17
     1、设备注册增加deviceIp字段，通过代理上来的设备不能通过socket获取到设备ip
     2、修正运行电视墙时，cms段错误，同步等待时判断msg是否为空，即超时
     3、设备运行状态表增加pu_registered字段，解决设备实际已经下线，但数据库的状态为在线状态；
     4、修正不能批量添加解码业务点的bug；
     5、批量添加业务点默认含有云台;
     6、删除区域、设备、业务点时，向在线的存储服务器投递gu列表改变的通知消息；
     7、增加网络配置功能。

v2.0.0.17
2012.11.13
     1、增加触发器update_alarm_id，记录每次写入告警的告警ID；
     2、BSS查询告警记录改为异步操作，避免了同步查询超时；
     3、修改对时的时间，取零时区的时间；
     4、增加CU的通告消息，比如授权到期通知，告警信息太多通知；
     5、增加电视墙的配置；
     6、增加巡回配置；
     7、增加了批量添加设备；
     8、增加单步执行功能；
     9、增加巡回功能；
    10、在录像策略里增加码流等级字段；

v2.0.0.16
2012.10.09
     1、修正CU获取URL有时失败的bug；
     2、添加平台授权到期功能，超过授权期，设备将注册不上平台;
     3、修改设备心跳，将心跳投递到数据库模块;


v2.0.0.15
2012.09.14
     1、修改BSS端告警信息的排序功能失灵的bug；
     2、录像策略查询根据业务点排序;
     3、对云台控制的用户进行等级控制;
     4、批量添加业务点。

v2.0.0.14
2012.08.29
     1、BSS无法修改监控中心编号bug；
     2、添加连接平台标志字段；
     3、修正电子地图的防区业务点查询不全的bug；
     4、添加bss告警记录查询、删除、自动删除策略功能；
     5、修正告警记录的业务点名称为空的bug；

v2.0.0.13
2012.08.18
     1、增加电子地图功能；

v2.0.0.12
2012.08.07
     1、修正设备乱序bug，根据设备在线状态和puid进行排序；
     2、修改设备最小心跳为3；  
 

v2.0.0.11
2012.07.23
     1、修正处警时间乱序bug，根据时间进行排序；
     2、修正无法添加转发服务器的bug；  
     3、修正无法添加存储服务器的bug；
     4、修改了存储服务器的添加和修改；
     5、增加转发服务器在线状态；
     6、增加存储服务器在线状态；
     7、增加设备在线状态；
     8、修改录像策略查询，增加了设备名、设备ID、业务名、区域名等字段；    


v2.0.0.10
2012.06.30
     1、增加硬盘组的添加、删除、查询功能；
     2、增加向硬盘组中添加硬盘-删除硬盘功能；  
     3、增加查询硬盘格式化进度功能；
     4、增加查询空闲硬盘功能；
     5、增加查询硬盘组信息功能；
     6、增加版本号控制功能；
     7、修正修改设备的转发服务器时，CMS崩溃的bug；


v2.0.0.6
2012.05.28
     1、增加了数据库数据恢复功能；
     2、将设备报警信息保存到数据库，客户端可以查询设备报警信息；  
     3、在“网络信息”中添加“备用DNS” ；
     4、在“联动报警”中添加“联动输出时长”；
     5、完成设备控制操作；
     6、修改域名后，将域名称上报给CU客户端；

v2.0.0.5
2012.05.05
     1、修正删除所有厂商后，BSS查询失败的BUG；
     2、修正时间段大于8时CMS段错误的BUG；
     3、编码参数里添加了音频输入模式；
     4、IO报警参数里添加了IO类型；
     5、修改备份数据库，不导出触发器；
     6、修改特殊字符过滤。

v2.0.0.4
2012.04.23
     1、修正CU登陆之后读取设备业务点列表失败的bug；
     2、修改获取url，增加解码器信息；
     3、修改根据组名查询用户，改为根据组名模糊查询用户；
     4、修改了云台参数，添加串口信息；
     5、修改了网络参数；
     6、编码参数里添加了编码等级；
     7、录像参数里添加了是否全天录像；
     8、视频遮挡参数里添加了遮挡使能；
     9、OSD参数里添加文本内容、最大宽、最大高

v2.0.0.3
2012.04.09
     1、修改查询区域为分页查询；
     2、修改查询转发服务器为分页查询；
     3、修改查询设备厂商为分页查询； 
     4、将以前写死的URL改为从设备或者MDS获取；
     5、修改数据库连接池，自动修复数据库连接；
     6、修正BSS不能修改服务器时间的bug。
     7、将数据库脚本的所有名字字段改为64个字节，转发服务器名字不可重名，存储服务器名字不可重名；
     8、BSS查询所有GU时进行分页查询；
     9、修改客户端查询区域的协议，将查询所有区域改为查询该区域的下一级区域；
    10、修改数据库备份，改为只备份数据，不备份表结构。

v2.0.0.2
2012.03.29
     1、增加了存储服务器的配置（增加、删除、修改、查询）；
     2、增加了存储策略的配置；
     3、增加了第三阶段协议；
v2.0.0.1
2012.02.24
     1、增加了特殊字符过滤以及特定格式的检查；
     2、修改在bss中删除了已经登陆的cu用户，在CU用户不退出的情况下再用此用户还能登陆的bug，
        现在修正为删除用户后将现在已经登陆的用户强制下线；
     3、修改在bss中删除已经登陆的管理员，在管理员不退出的情况下再用此用户登陆提示该用
        户已经登陆的bug，应该提示该用户不存在；
     4、增加在修改了cu用户资料时，强制用户下线，并发通知其下线；
     5、增加在修改了用户所在组的资料时，强制用户下线，并发通知其下线；
     6、增加在删除用户所在组时，强制用户下线，并发通知其下线；
     7、编写了触发器，在删除了转发服务器时，设备的转发为该被删除的转发服务器时，将设备的转发设为空；

v2.0.0.0
2012.02.10
     增加了数据库备份功能

v0.02
2012.02.08
cms的0.02版本完成了以下功能：
       1、增加了查询和设置设备的移动侦测参数；
       2、增加了查询和设置设备的视频丢失参数； 
       3、增加了查询和设置设备的遮挡告警参数；
       4、增加了查询和设置设备的IO告警参数；
       5、增加了查询和设置联动参数
       6、增加了查询和设置设备的录像参数；
       7、增加了查询和设置云镜控制； 
       8、增加了查询和设置设备的云台参数；
       9、增加了读取配置文件。
  BSS：
     增加了查询某机构下所有的设备（包括子机构的设备）

v0.0.1
2011.12.26
cms的0.0.1版本完成了以下功能：
  BSS：
     完成了管理员管理，用户组管理，用户管理，机构管理，
设备管理，厂商管理，MDS管理，系统配置等

  CU：
     1.完成了用户的登陆以及心跳；
     2.完成了查询设备信息；
     3.完成了查询和设置平台信息；
     4.完成了查询和设置编码参数；
     5.完成了查询和设置显示参数；
     6.完成了查询和设置OSD参数。
     7.完成了设备上下线的通知

  设备PU：
     1.完成了设备注册，设备心跳；
     2.完成了查询设备信息；
     3.完成了查询和设置平台信息；
     4.完成了查询和设置编码参数；
     5.完成了查询和设置显示参数；
     6.完成了查询和设置OSD参数。
